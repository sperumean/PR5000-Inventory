{"ast":null,"code":"import{useReservationContext}from\"../hooks/useReservationContext\";import{useAuthContext}from\"../hooks/useAuthContext\";import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const UserEquipmentDetails=()=>{const[selectedDate,setSelectedDate]=useState(\"\");const[equipment,setEquipment]=useState([]);const[error,setError]=useState(null);const[reservationStatus,setReservationStatus]=useState(\"\");const[selectedDateTime,setSelectedDateTime]=useState(\"\");const{dispatch}=useReservationContext();const{user}=useAuthContext();const{equipmentId}=useParams();useEffect(()=>{const fetchEquipmentDetails=async()=>{try{const response=await fetch(\"/api/equipment/\".concat(equipmentId));const data=await response.json();if(response.ok){setEquipment(data);setError(null);}}catch(error){console.error(\"Error fetching equipment details:\",error);setError(\"Error fetching equipment details:\",error);}};fetchEquipmentDetails();},[equipmentId]);const handleReserveClick=async()=>{if(!user||!equipment){return;}const reservation={equipment_id:equipmentId,title:equipment.title,image:equipment.image,date:selectedDateTime,price:equipment.price,reservation_status:\"Waiting for approval\"};try{const reservationResponse=await fetch(\"/api/reservations\",{method:\"POST\",body:JSON.stringify(reservation),headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(user.token)}});const json=await reservationResponse.json();if(reservationResponse.ok){setReservationStatus(\"reserved\");dispatch({type:\"CREATE_RESERVATION\",payload:json});}if(!reservationResponse.ok){console.error(\"Error making reservation:\",reservationResponse.statusText);}}catch(error){console.error(\"Error making reservation:\",error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"equipment-details\",children:equipment?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"img-title flex-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"picture\",children:/*#__PURE__*/_jsx(\"img\",{src:equipment.image,alt:equipment.title})}),/*#__PURE__*/_jsx(\"h3\",{children:equipment.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-parent flex-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"p\",{children:equipment.description}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \",/*#__PURE__*/_jsx(\"strong\",{children:equipment.price})]})]}),reservationStatus===\"reserved\"?/*#__PURE__*/_jsx(\"div\",{className:\"reserved\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Reserved\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"reservation-div\",children:[/*#__PURE__*/_jsx(\"p\",{className:equipment.availability?\"available\":\"not-available\",children:/*#__PURE__*/_jsx(\"strong\",{children:equipment.availability?\"Available\":\"Not available\"})}),equipment.availability?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Choose date for reservation:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:selectedDate,min:new Date().toISOString().slice(0,16),onChange:e=>setSelectedDateTime(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleReserveClick,children:\"Reserve\"})]}):\"\"]})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error})});};export default UserEquipmentDetails;","map":{"version":3,"names":["useReservationContext","useAuthContext","useEffect","useState","useParams","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserEquipmentDetails","selectedDate","setSelectedDate","equipment","setEquipment","error","setError","reservationStatus","setReservationStatus","selectedDateTime","setSelectedDateTime","dispatch","user","equipmentId","fetchEquipmentDetails","response","fetch","concat","data","json","ok","console","handleReserveClick","reservation","equipment_id","title","image","date","price","reservation_status","reservationResponse","method","body","JSON","stringify","headers","Authorization","token","type","payload","statusText","className","children","src","alt","description","availability","value","min","Date","toISOString","slice","onChange","e","target","onClick"],"sources":["Z:/inventory4/equipment_reservation_system/frontend/src/components/UserEquipmentDetails.js"],"sourcesContent":["import { useReservationContext } from \"../hooks/useReservationContext\";\r\nimport { useAuthContext } from \"../hooks/useAuthContext\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst UserEquipmentDetails = () => {\r\n  const [selectedDate, setSelectedDate] = useState(\"\");\r\n  const [equipment, setEquipment] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [reservationStatus, setReservationStatus] = useState(\"\");\r\n\r\n  const [selectedDateTime, setSelectedDateTime] = useState(\"\");\r\n\r\n  const { dispatch } = useReservationContext();\r\n  const { user } = useAuthContext();\r\n  const { equipmentId } = useParams();\r\n\r\n  useEffect(() => {\r\n    const fetchEquipmentDetails = async () => {\r\n      try {\r\n        const response = await fetch(`/api/equipment/${equipmentId}`);\r\n        const data = await response.json();\r\n        if (response.ok) {\r\n          setEquipment(data);\r\n          setError(null);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching equipment details:\", error);\r\n        setError(\"Error fetching equipment details:\", error);\r\n      }\r\n    };\r\n    fetchEquipmentDetails();\r\n  }, [equipmentId]);\r\n\r\n  const handleReserveClick = async () => {\r\n    if (!user || !equipment) {\r\n      return;\r\n    }\r\n\r\n    const reservation = {\r\n      equipment_id: equipmentId,\r\n      title: equipment.title,\r\n      image: equipment.image,\r\n      date: selectedDateTime,\r\n      price: equipment.price,\r\n      reservation_status: \"Waiting for approval\",\r\n    };\r\n\r\n    try {\r\n      const reservationResponse = await fetch(`/api/reservations`, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(reservation),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n      });\r\n\r\n      const json = await reservationResponse.json();\r\n\r\n      if (reservationResponse.ok) {\r\n        setReservationStatus(\"reserved\");\r\n\r\n        dispatch({ type: \"CREATE_RESERVATION\", payload: json });\r\n      }\r\n      if (!reservationResponse.ok) {\r\n        console.error(\r\n          \"Error making reservation:\",\r\n          reservationResponse.statusText\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error making reservation:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"equipment-details\">\r\n      {equipment ? (\r\n        <>\r\n          <div className=\"img-title flex-container\">\r\n            <div className=\"picture\">\r\n              <img src={equipment.image} alt={equipment.title} />\r\n            </div>\r\n\r\n            <h3>{equipment.title}</h3>\r\n          </div>\r\n\r\n          <div className=\"bottom-parent flex-container\">\r\n            <div className=\"details\">\r\n              <p>{equipment.description}</p>\r\n              <p>\r\n                Price: <strong>{equipment.price}</strong>\r\n              </p>\r\n            </div>\r\n            {reservationStatus === \"reserved\" ? (\r\n              <div className=\"reserved\">\r\n                <p>Reserved</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"reservation-div\">\r\n                <p\r\n                  className={\r\n                    equipment.availability ? \"available\" : \"not-available\"\r\n                  }\r\n                >\r\n                  <strong>\r\n                    {equipment.availability ? \"Available\" : \"Not available\"}\r\n                  </strong>\r\n                </p>\r\n\r\n                {equipment.availability ? (\r\n                  <div>\r\n                    <label>Choose date for reservation:</label>\r\n                    <input\r\n                      type=\"datetime-local\"\r\n                      value={selectedDate}\r\n                      min={new Date().toISOString().slice(0, 16)}\r\n                      onChange={(e) => setSelectedDateTime(e.target.value)}\r\n                    />\r\n                    <button onClick={handleReserveClick}>Reserve</button>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"error-message\">{error}</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default UserEquipmentDetails;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}